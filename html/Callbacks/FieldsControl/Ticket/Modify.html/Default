<%args>
$TicketObj
$ARGSRef
$skip_update
$results => []
</%args>

<%init>
my $check = RT::Extension::FieldsControl::check_ticket($TicketObj, $ARGSRef, 'Modify');
if (my @e = @{$check->{errors}}) {
	$$skip_update = 1;
	while (my $name = shift @e) {
		push @$results, 
			loc("ERROR: Restriction <[_1]>, bad fields: ~[[_2]~]",
				$name,
				join ',', map { loc($_) } @{shift @e}
			);
	}
}
</%init>